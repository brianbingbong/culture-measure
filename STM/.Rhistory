bind_rows %>%
mutate(filename=gsub(".csv","",basename(x)))
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles.list = list.files(path = "./culture-measure/DTMs/Agriculture_Bank_of_China", pattern="*.csv", full.names = TRUE)
myfiles2 <- myfiles %>%
lapply(read.csv(file = myfiles, header=TRUE)) %>%
bind_rows %>%
mutate(filename=gsub(".csv","",basename(x)))
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles.list = list.files(pattern="*.csv", full.names = TRUE)
myfiles2 <- myfiles %>%
lapply(read.csv(file = myfiles, header=TRUE)) %>%
bind_rows %>%
mutate(filename=gsub(".csv","",basename(x)))
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles.list = list.files(pattern="*.csv", full.names = TRUE)
myfiles.df <-   data.frame( X1 = myfiles.list ) %>%
mutate( filename_wo_ext = gsub( ".csv", "", X1 ) )
head(myfiles.df)
View(myfiles.df)
head(myfiles.df[1])
head(myfiles.df(1))
View(myfiles.df)
View(myfiles.df)
View(myfiles.df)
head(myfiles.df)
head(myfiles)
head(myfiles.list)
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles.list = list.files(pattern="*.csv", full.names = TRUE)
lapply(myfiles.list, fread, sep=",")
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles.list = list.files(pattern="*.csv", full.names = TRUE)
lapply(myfiles.list)
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles.list = list.files(pattern="*.csv", full.names = TRUE)
lapply(myfiles.list, read.csv2)
myfiles.df <-   data.frame( X1 = myfiles.list ) %>%
mutate( filename_wo_ext = gsub( ".csv", "", X1 ) )
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles.list = list.files(pattern="*.csv", full.names = TRUE)
myfiles.list <- lapply(myfiles.list, read.csv2)
myfiles.df <-   data.frame( X1 = myfiles.list ) %>%
mutate( filename_wo_ext = gsub( ".csv", "", X1 ) )
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles.list = list.files(pattern="*.csv", full.names = TRUE)
myfiles <- lapply(myfiles.list, read.csv2)
myfiles.df <-   data.frame( X1 = myfiles.list ) %>%
mutate( filename_wo_ext = gsub( ".csv", "", X1 ) )
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles = list.files(pattern="*.csv", full.names = TRUE)
myfiles2 <- lapply(myfiles, read.csv2)
myfiles2.df <-   data.frame( X1 = myfiles2 ) %>%
mutate( filename_wo_ext = gsub( ".csv", "", X1 ) )
View(myfiles2)
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles = list.files(pattern="*.csv", full.names = TRUE)
myfiles2 <- lapply(myfiles, read.csv2) %>%
bind_rows()
myfiles2.df <-   data.frame( X1 = myfiles2 ) %>%
mutate( filename_wo_ext = gsub( ".csv", "", X1 ) )
View(myfiles2)
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles = list.files(pattern="*.csv", full.names = TRUE)
myfiles2 <- lapply(myfiles, read.csv2) %>%
bind_rows()
myfiles2.df <-   data.frame( X1 = myfiles ) %>%
mutate( filename_wo_ext = gsub( ".csv", "", X1 ) )
head(myfiles.list)
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles = list.files(pattern="*.csv", full.names = TRUE)
myfiles2 <- lapply(myfiles, read.csv2)
myfiles2.df <-   data.frame( X1 = myfiles ) %>%
mutate( filename_wo_ext = gsub( ".csv", "", X1 ) )
head(myfiles2)
View(myfiles2.df)
View(myfiles2)
View(myfiles2.df)
View(myfiles.df)
View(myfiles2)
library(tidyverse)
library(dplyr)
library(readr)
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles = list.files(pattern="*.csv", full.names = TRUE)
myfiles2 <- lapply(myfiles, read.csv2)
myfiles2.df <-   data.frame( X1 = myfiles ) %>%
mutate( filename_wo_ext = gsub( ".csv", "", X1 ) )
head(myfiles)
myfiles
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles = list.files(pattern="*.csv", full.names = FALSE)
myfiles2 <- lapply(myfiles, read.csv2)
myfiles2.df <-   data.frame( X1 = myfiles ) %>%
mutate( filename_wo_ext = gsub( ".csv", "", X1 ) )
myfiles
View(myfiles2)
myfiles2[[1]][["token.frequency"]]
myfiles
View(myfiles.df)
View(myfiles2.df)
View(myfiles2)
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles = list.files(pattern="*.csv", full.names = FALSE)
lapply(myfiles, function(myfiles) {
t <- read.table(myfiles, header=TRUE)
})
View(myfiles2.df)
View(myfiles.df)
View(myfiles.df)
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles = list.files(pattern="*.csv", full.names = FALSE)
lapply(myfiles, read.csv2)
myfiles2.df <-   data.frame( X1 = myfiles ) %>%
mutate( filename_wo_ext = gsub( ".csv", "", X1 ) )
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles = list.files(pattern="*.csv", full.names = FALSE)
myfiles2 <- lapply(myfiles, read.csv2)
View(myfiles2)
library(tidyverse)
library(dplyr)
library(readr)
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles = list.files(pattern="*.csv", full.names = FALSE)
myfiles2 <- lapply(myfiles, read.csv2) %>%
bind_rows
View(myfiles2)
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles = list.files(pattern="*.csv", full.names = FALSE)
myfiles2 <- lapply(myfiles, mutate( filename_wo_ext = gsub( ".csv", "", myfiles ) ))
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles = list.files(pattern="*.csv", full.names = FALSE)
myfiles2 <- lapply(myfiles, mutate( filename_wo_ext = gsub( ".csv", "", data.frame(myfiles) ) ))
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles = list.files(pattern="*.csv", full.names = FALSE)
myfiles2 <- lapply(myfiles, function(x) {
t <- read.csv(x)}) # load file)
View(myfiles2)
View(myfiles2)
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles = list.files(pattern="*.csv", full.names = FALSE)
myfiles2 <- lapply(myfiles, function(x) {
t <- read.csv(x)
mutate(t, filename_wo_ext = gsub( ".csv", "", x ))
})
View(myfiles2)
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles = list.files(pattern="*.csv", full.names = FALSE)
myfiles2 <- lapply(myfiles, function(x) {
t <- read.csv(x)
mutate(t, document = gsub( ".csv", "", x ))
})
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles = list.files(pattern="*.csv", full.names = FALSE)
myfiles2 <- lapply(myfiles, function(x) {
t <- read.csv(x)
mutate(t, document = gsub( ".csv", "", x ))
}) %>%
bind_rows
View(myfiles2)
library(tidyverse)
library(dplyr)
library(readr)
setwd('~/GitHub/culture-measure/DTMs/Agriculture_Bank_of_China')
myfiles = list.files(pattern="*.csv", full.names = FALSE)
myfiles2 <- lapply(myfiles, function(x) {
t <- read.csv(x)
mutate(t, document = gsub( ".csv", "", x ))
}) %>%
bind_rows
View(myfiles2)
setwd("~/GitHub/culture-measure/STM")
myfiles = list.files(pattern="*.csv", full.names = FALSE)
myfiles2 <- lapply(myfiles, function(x) {
t <- read.csv(x)
mutate(t, document = gsub( ".csv", "", x ))
}) %>%
bind_rows
library(tidyverse)
library(dplyr)
library(readr)
myfiles = list.files(pattern="*.csv", full.names = FALSE)
myfiles2 <- lapply(myfiles, function(x) {
t <- read.csv(x)
mutate(t, document = gsub( ".csv", "", x ))
}) %>%
bind_rows
View(myfiles2)
myfiles
View(myfiles2)
View(myfiles2)
head(myfiles2)
library(stm)
install.packages("stm")
library(stm)
processed <- textProcessor(myfiles2, metadata=myfiles2)
install.packages("tm", repos="http://R-Forge.R-project.org")
install.packages('tm')
library(stm)
processed <- textProcessor(myfiles2, metadata=myfiles2)
head(myfiles)
head(myfiles.list)
myfiles.list
View(myfiles2)
library(stm)
processed <- textProcessor(myfiles2$review_text, metadata=myfiles2)
View(processed)
out <- prepDocuments(processed$documents, processed$vocab, processed$meta)
docs <- out$documents
vocab <- out$vocab
meta <- out$meta
View(out)
View(processed)
docs
vocab
First_STM <- stm(documents = out$documents, vocab = out$vocab, K = 10, prevalence =~ rating + s(day) , max.em.its = 75, data = out$meta, init.type = "Spectral", verbose = FALSE)
library(tidyverse)
library(dplyr)
library(readr)
myfiles = list.files(pattern="*.csv", full.names = FALSE)
myfiles2 <- lapply(myfiles, function(x) {
t <- read.csv(x)
mutate(t, document = gsub( ".csv", "", x ))
}) %>%
bind_rows
myfiles.list
library(stm)
processed <- textProcessor(myfiles2$review_text, metadata=myfiles2)
out <- prepDocuments(processed$documents, processed$vocab, processed$meta)
docs <- out$documents
vocab <- out$vocab
meta <- out$meta
vocab
First_STM <- stm(documents = out$documents, vocab = out$vocab, K = 10, prevalence =~ rating + s(day) , max.em.its = 75, data = out$meta, init.type = "Spectral", verbose = FALSE)
First_STM <- stm(documents = out$documents, vocab = out$vocab, K = 6, data = out$meta, init.type = "Spectral", verbose = FALSE)
install.packages('Rcpp')
install.packages('Rcpp')
library(Rcpp)
First_STM <- stm(documents = out$documents, vocab = out$vocab, K = 6, data = out$meta, init.type = "Spectral", verbose = FALSE)
library(tidyverse)
library(dplyr)
library(readr)
myfiles = list.files(pattern="*.csv", full.names = FALSE)
myfiles2 <- lapply(myfiles, function(x) {
t <- read.csv(x)
mutate(t, document = gsub( ".csv", "", x ))
}) %>%
bind_rows
myfiles.list
library(stm)
processed <- textProcessor(myfiles2$review_text, metadata=myfiles2)
out <- prepDocuments(processed$documents, processed$vocab, processed$meta)
docs <- out$documents
vocab <- out$vocab
meta <- out$meta
vocab
library(Rcpp)
First_STM <- stm(documents = out$documents, vocab = out$vocab, K = 6, data = out$meta, init.type = "Spectral", verbose = FALSE)
plot(First_STM)
library(tidyverse)
library(dplyr)
library(readr)
df <- read.table("Apple-combined")
fileName <- 'Apple-combined'
readChar(fileName, file.info(fileName)$size)
fileName <- 'Apple-combined'
df <- readChar(fileName, file.info(fileName)$size)
library(stm)
processed <- textProcessor(df)
out <- prepDocuments(processed$documents, processed$vocab, processed$meta)
docs <- out$documents
vocab <- out$vocab
meta <- out$meta
library(Rcpp)
First_STM <- stm(documents = out$documents, vocab = out$vocab, K = 10, data = out$meta, init.type = "Spectral", verbose = FALSE)
vocab
docs
out
library(Rcpp)
First_STM <- stm(documents = out$documents, vocab = out$vocab, K = 10, init.type = "Spectral", verbose = FALSE)
library(Rcpp)
First_STM <- stm(documents = out$documents, K = 10, init.type = "Spectral", verbose = FALSE)
library(Rcpp)
First_STM <- stm(documents = out$documents, vocab = out$vocab, K = 10, init.type = "Spectral", verbose = FALSE)
out <- prepDocuments(processed$documents, processed$vocab, processed$meta)
docs <- out$documents
vocab <- out$vocab
meta <- out$meta
fileName <- 'Apple-combined'
df <- readtext(fileName, file.info(fileName)$size)
install.packages("readtext")
fileName <- 'Apple-combined'
df <- readtext(fileName, file.info(fileName)$size)
library('readtext')
fileName <- 'Apple-combined'
df <- readtext(fileName, file.info(fileName)$size)
View(df)
library(stm)
processed <- textProcessor(df$text)
out <- prepDocuments(processed$documents, processed$vocab, processed$meta)
docs <- out$documents
vocab <- out$vocab
meta <- out$meta
View(processed)
myfiles = list.files(pattern="*.csv", full.names = FALSE)
myfiles2 <- lapply(myfiles, function(x) {
t <- read.csv(x)
mutate(t, document = gsub( ".csv", "", x ))
}) %>%
bind_rows
out <- prepDocuments(processed$documents, processed$vocab)
docs <- out$documents
vocab <- out$vocab
library('readtext')
fileName <- 'Apple-combined'
df <- readtext(fileName, file.info(fileName)$size)
df1 <- read.csv("apple-filtered-joined.csv")
View(df1)
library(stm)
processed <- textProcessor(df1$review_text)
out <- prepDocuments(processed$documents, processed$vocab)
docs <- out$documents
vocab <- out$vocab
library(Rcpp)
First_STM <- stm(documents = out$documents, vocab = out$vocab, K = 10, init.type = "Spectral", verbose = FALSE)
First_STM
View(First_STM)
library(Rcpp)
First_STM <- stm(documents = out$documents, vocab = out$vocab, K = 10, prevalence =~ rating +s(day) , max.em.its = 75, data = out$meta, init.type = "Spectral", verbose = FALSE)
library(Rcpp)
First_STM <- stm(documents = out$documents, vocab = out$vocab, K = 10, max.em.its = 75, data = out$meta, init.type = "Spectral", verbose = FALSE)
labelTopics, plot.STM(,type = "labels")
labelTopics, plot.STM(type = "labels")
plot.STM(type = "labels")
labelTopics(First_STM)
View(df1)
View(df1)
View(df)
tidy_df <- df %>%
mutate(line = row_number()) %>%
unnest_tokens(word, text) %>%
anti_join(stop_words)
library(tidyverse)
library(dplyr)
library(readr)
library('readtext')
fileName <- 'Apple-combined'
df <- readtext(fileName, file.info(fileName)$size)
df1 <- read.csv("apple-filtered-joined.csv")
tidy_df <- df %>%
mutate(line = row_number()) %>%
unnest_tokens(word, text) %>%
anti_join(stop_words)
library(janeaustenr)
install.packages('janeaustenr')
library(janeaustenr)
tidy_df <- df %>%
mutate(line = row_number()) %>%
unnest_tokens(word, text) %>%
anti_join(stop_words)
library(tidyverse)
library(dplyr)
library(readr)
myfiles = list.files(pattern="*.csv", full.names = FALSE)
myfiles2 <- lapply(myfiles, function(x) {
t <- read.csv(x)
mutate(t, document = gsub( ".csv", "", x ))
}) %>%
bind_rows
library('readtext')
fileName <- 'Apple-combined'
df <- readtext(fileName, file.info(fileName)$size)
df1 <- read.csv("apple-filtered-joined.csv")
library(janeaustenr)
tidy_df <- df %>%
mutate(line = row_number()) %>%
unnest_tokens(word, text) %>%
anti_join(stop_words)
library(janeaustenr)
library(dplyr)
tidy_df <- df %>%
mutate(line = row_number()) %>%
unnest_tokens(word, text) %>%
anti_join(stop_words)
library(janeaustenr)
library(dplyr)
tidy_df <- df %>%
mutate(line = row_number()) %>%
tidytext::unnest_tokens(word, text) %>%
anti_join(stop_words)
install.packages('tidytext')
library(janeaustenr)
library(dplyr)
library(tidytext)
tidy_df <- df %>%
mutate(line = row_number()) %>%
tidytext::unnest_tokens(word, text) %>%
anti_join(stop_words)
View(tidy_df)
tidy_df %>%
count(word, sort = TRUE)
tidy_df %>%
count(word, sort = TRUE)
library(janeaustenr)
library(dplyr)
library(tidytext)
tidy_df <- df %>%
mutate(line = row_number()) %>%
tidytext::unnest_tokens(word, text) %>%
anti_join(stop_words) %>%
filter(word != "â")
tidy_df %>%
count(word, sort = TRUE)
library(quanteda)
library(stm)
dfm <- tidy_df %>%
count(doc_id, word, sort = TRUE) %>%
cast_dfm(doc_id, word, n)
View(dfm)
topic_model <- stm(dfm, K = 12,
verbose = FALSE, init.type = "Spectral")
labelTopics(topic_model)
myfiles = list.files(pattern="*-filtered.txt", full.names = FALSE)
myfiles2 <- lapply(myfiles, function(x) {
t <- readtext(x)
mutate(t, document = gsub( "-filtered.txt", "", x ))
}) %>%
bind_rows
View(myfiles2)
myfiles.list = list.files(pattern="*-filtered.txt", full.names = FALSE)
myfiles <- lapply(myfiles, function(x) {
t <- readtext(x)
mutate(t, document = gsub( "-filtered.txt", "", x ))
}) %>%
bind_rows
tidy_myfiles <- myfiles %>%
mutate(line = row_number()) %>%
tidytext::unnest_tokens(word, text) %>%
anti_join(stop_words)
tidy_myfiles
View(tidy_myfiles)
myfiles.list = list.files(pattern="*-filtered.txt", full.names = FALSE)
myfiles <- lapply(myfiles, function(x) {
t <- readtext(x)
mutate(t, document = gsub( "-filtered.txt", "", x ))
}) %>%
bind_rows
myfiles.list = list.files(pattern="*-filtered.txt", full.names = FALSE)
myfiles <- lapply(myfiles, function(x) {
t <- readtext(x)
mutate(t, document = gsub( "-filtered.txt", "", x ))
}) %>%
bind_rows
myfiles.list = list.files(pattern="*-filtered.txt", full.names = FALSE)
myfiles <- lapply(myfiles, function(x) {
t <- readtext(x)
mutate(t, document = gsub( "-filtered.txt", "", x ))
}) %>%
bind_rows
library(tidyverse)
library(dplyr)
library(readr)
library(readtext)
library(tidytext)
library(janeaustenr)
myfiles.list = list.files(pattern="*-filtered.txt", full.names = FALSE)
myfiles <- lapply(myfiles.list, function(x) {
t <- readtext(x)
mutate(t, document = gsub( "-filtered.txt", "", x ))
}) %>%
bind_rows
tidy_myfiles <- myfiles %>%
tidytext::unnest_tokens(word, text) %>%
anti_join(stop_words)
tidy_myfiles
View(tidy_myfiles)
myfiles.list = list.files(pattern="*-filtered.txt", full.names = FALSE)
myfiles <- lapply(myfiles.list, function(x) {
t <- readtext(x)
mutate(t, document = gsub( "-filtered.txt", "", x ))
}) %>%
bind_rows
tidy_myfiles <- myfiles %>%
tidytext::unnest_tokens(word, text) %>%
anti_join(stop_words) %>%
select(document, word)
tidy_myfiles
View(tidy_myfiles)
tidy_myfiles %>%
count(word, sort = TRUE)
myfiles.list = list.files(pattern="*-filtered.txt", full.names = FALSE)
myfiles <- lapply(myfiles.list, function(x) {
t <- readtext(x)
mutate(t, document = gsub( "-filtered.txt", "", x ))
}) %>%
bind_rows
tidy_myfiles <- myfiles %>%
tidytext::unnest_tokens(word, text) %>%
anti_join(stop_words) %>%
select(document, word) %>%
filter(word != "â")
tidy_myfiles
tidy_myfiles %>%
count(word, sort = TRUE)
library(quanteda)
library(stm)
dfm <- tidy_myfiles %>%
count(document, word, sort = TRUE) %>%
cast_dfm(document, word, n)
topic_model <- stm(dfm, K = 12,
verbose = FALSE, init.type = "Spectral")
labelTopics(topic_model)
